#!/usr/bin/env expect
spawn [lindex $argv 0]
set test_file [lindex $argv 1]

expect "${test_file}:26 vdbg> " { send "p a\r" } timeout { exit 1 }
expect "a = Test{\r\n    a: 123\r\n} ((main.main.Test | main.main.Test2))" { send "q\r" } timeout { exit 1 }
expect eof
