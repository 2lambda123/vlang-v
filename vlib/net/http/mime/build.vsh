import net.http
import json

struct MimeType {
	str          string
	source       string
	extensions   []string
	compressible bool
	charset      string
}

fn main() {
	raw_json := http.get('https://raw.githubusercontent.com/jshttp/mime-db/master/db.json')?
	out_map := json.decode(map[string]MimeType, raw_json.text)?
	write_file('db.v', 'module mime\n\n// FILE AUTOGENERATED BY `build.vsh` - DO NOT EDIT\n\nconst db = $out_map')?
	execute('${@VEXE} fmt -w db.v')
}
